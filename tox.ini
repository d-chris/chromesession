[tox]
requires =
    tox>=4.2
env_list =
    py313-bs4
    py313
    py312
    py311
    py310
    py39
    cov

[testenv]
deps =
    poetry==1.8.5
set_env =
    COVERAGE_FILE = {toxworkdir}/.coverage.{envname}
commands =
    poetry run pytest
pre_commands =
    poetry install --only main,test

[testenv:py313-bs4]
pre_commands =
    poetry install --only main,test --extras bs4

[testenv:cov]
skip_install = true
deps =
    coverage
parallel_show_output = true
set_env =
    COVERAGE_FILE = {toxworkdir}/.coverage
commands =
    coverage combine {toxworkdir}
    coverage report --show-missing --skip-covered
    coverage html -d {toxworkdir}/htmlcov
depends =
    py313-bs4
    py313
    py312
    py311
    py310
    py39
